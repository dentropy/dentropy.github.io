---
uuid: 100d6889-e83d-4967-bec2-7e9424d8cd24
share: true
title: IPLD CID Tutorial
---
In this tutoiral we will be learning about [IPLD](/IPLD) and [CID](/CID)'s which are used in [IPFS](/IPFS). I am trying to manually generate a CID for various data formats manually so it can be used independently of IPFS. I have a couple use cases,

This is a requirement for my [IPLD User Model](/IPLD User Model)

#### Question Engine Memes are CID's

The [Question Engine - QE](/cc5cc49d-f554-4f29-b31a-b8789688e6a3) application I am working on has [RBAC](/RBAC). This means that some data shared by someone to someone else is not supposed to be uploaded to the public internet. But if that data was uploaded to the internet it would use the same [CID](/CID). This also allows data that is shared privately to later be share publicly and not have to update any private references to it. 


#### Goals of This Tutorial

* Install [Kubo](/Kubo) the [Go](/7900e06b-6a66-4a30-bdf7-7661c020e516) IPFS implementation
* Add files to IPFS using Kugo and get [CID](/CID)
* Use [Javascript](/e4f5fb54-c63f-4567-851b-e61a4a58037d) to produce CID + CAR of DAG-JSON
	* Validate using Kugo CID
* Use [Javascript](/e4f5fb54-c63f-4567-851b-e61a4a58037d) to produce CID + CAR of raw image file
	* Validate using Kugo CID
* Use [Python](/80428ac9-197a-4c70-9230-119cf9079782) to produce CID + CAR of DAG-JSON
	* Validate using Kugo CID
	* Validate using Javascript
* Use [Python](/80428ac9-197a-4c70-9230-119cf9079782) to produce CID + CAR using raw image file
	* Validate using Kugo CID
	* Validate using Javascript

#### Install Kugo

Just follow this -> [Kubo | IPFS Docs](https://docs.ipfs.tech/install/command-line/#install-official-binary-distributions)

#### Add files to IPFS using Kugo and get [CID](/CID)

``` bash
(base) ➜  docs git:(main) ✗ ipfs add index.html
added QmZMLtdgQ4mhzwaLh4hEyEntxUqqLpJKLMeFtZZd8Jwzg1 index.html
 935.17 KiB / 935.17 KiB [=================================] 100.00%(base) ➜  docs git:(main) ✗ 
```

#### Use [Javascript](/e4f5fb54-c63f-4567-851b-e61a4a58037d) to produce CID + CAR of DAG-JSON

#TODO

#### JavaScript Libraries

* [js-multiformats](/js-multiformats)
* [js-dag-json](/js-dag-json)
* [Ajv](/Ajv)

``` bash
# Optional: Create npm package
npm init -y

npm install multiformats
npm install @ipld/dag-json
npm install ajv
npm install ajv-formats

```

#### Producing CID File Hashes compatible with [IPFS](/IPFS)

``` bash
cat "helloworld" > helloworld
```

``` javascript
// test002.js
import Hash from 'ipfs-only-hash';
import fs from 'fs';
const data = 'hello world!'
let value = { hello: 'world' }
const filePath = '/home/dentropy/Projects/ipld-test/hello world';
value = await fs.readFileSync(filePath)
let input = value
const hash = await Hash.of(input)
console.log(hash) // QmTp2hEo8eXRp6wg7jXv1BLCMh5a4F3B7buAUZNZUu772j
```

``` bash
(base) ➜  ipld-test node test002.js
Qmf412jQZiuVUtdgnB36FXFX7xg5V6KEbSJ4dpQuhkLyfD
(base) ➜  ipld-test ipfs add hello\ world
added Qmf412jQZiuVUtdgnB36FXFX7xg5V6KEbSJ4dpQuhkLyfD hello world
 11 B / 11 B
(base) ➜  ipld-test 
```

#### Generate CID for raw file


``` js
// raw-file-to-cid
import fs from 'fs';
import { CID } from 'multiformats/cid'
const filePath = '/home/dentropy/Projects/ipld-test/test001.js';
let value = await fs.readFileSync(filePath)
console.log(value)

import { encode, decode, code } from 'multiformats/codecs/raw'


let data = await encode(value)
console.log(data)

import { sha256 } from 'multiformats/hashes/sha2'
const hash = await sha256.digest(data)

const cid = CID.create(1, code, hash)
console.log("cid")
console.log(cid)

```


``` bash
ipfs add --cid-version 1 test001.js
```



``` bash
(base) ➜  ipld-test ipfs add --cid-version 1 test001.js
added bafkreicjkofrnonehqkbkmr5lgurkzzzl4jjy42354txy77jkkw7pijnym test001.js
(base) ➜  ipld-test test001.js
 642 B / 642 B
(base) ➜  ipld-test node raw_file_CID.js
<Buffer 69 
Uint8Array(642) [
  105, 109, 
]
cid
CID(bafkreicjkofrnonehqkbkmr5lgurkzzzl4jjy42354txy77jkkw7pijnym)
```

How to generate CID using just the file has?

#### Python Libraries

* [multiformats - python](/multiformats - python)
* [dag-json - python](/dag-json - python)
* [jsonschema - python](/jsonschema - python)


``` bash
# Optional: Setup python virtual environment
python3 -m pip install virtualenv
python3 -m venv env
source env/bin/activate

python3 -m pip install multiformats[full]
python3 -m pip install dag-json
python3 -m pip install jsonschema
python3 -m pip install jsonschema[format]

```

#### Links

* [Perkeep Tutorial](/Perkeep Tutorial)
#### Sources

* [Possible to determine if a file is present on IPFS by calculating its hash? - Stack Overflow](https://stackoverflow.com/questions/71418693/possible-to-determine-if-a-file-is-present-on-ipfs-by-calculating-its-hash)
* [alanshaw/ipfs-only-hash: #️⃣ Just enough code to calculate the IPFS hash for some data](https://github.com/alanshaw/ipfs-only-hash)
* [javascript - Node-less way to generate a CID that matches IPFS-Desktop CID - Stack Overflow](https://stackoverflow.com/questions/60046604/node-less-way-to-generate-a-cid-that-matches-ipfs-desktop-cid)


#### Backlinks

* [Backlog - Tutorials](/31f7e81a-967e-41f4-872e-91d1571df726)
* [Backlog - Tutorials](/31f7e81a-967e-41f4-872e-91d1571df726)
* [Backlog - DDaemon](/b9cd3e8b-1727-4a22-9332-90b42b5a7ffb)